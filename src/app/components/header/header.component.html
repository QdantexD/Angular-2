<header [class.scrolled]="isScrolled" class="header">
  <!-- Top Utility Bar -->
  <div class="header-top-bar">
    <div class="top-bar-container">
      <div class="top-bar-logo">
        <svg width="32" height="32" viewBox="0 0 32 32" class="logo-icon">
          <circle cx="16" cy="16" r="14" fill="none" stroke="#00f0ff" stroke-width="1.5" opacity="0.3"/>
          <path d="M16 6 L16 16 L22 20" fill="none" stroke="#00f0ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="16" cy="16" r="3" fill="#00f0ff" opacity="0.6"/>
        </svg>
        <span class="logo-text">BATTLENET</span>
      </div>
      
      <div class="top-bar-utils">
        <a href="#" class="util-link">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M8 2 L8 10 M8 10 L5 7 M8 10 L11 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12 L2 13 C2 13.5 2.5 14 3 14 L13 14 C13.5 14 14 13.5 14 13 L14 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Descargar Battle.net</span>
        </a>
        
        <a href="#" class="util-link">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
            <path d="M8 5.5 C8 5.5 8 6.5 8 7 C8 7.5 7.5 8 7 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="8" cy="10.5" r="0.5" fill="currentColor"/>
          </svg>
          <span>Asistencia</span>
        </a>
        
        <a *ngIf="!isAuthenticated" routerLink="/login" class="util-link">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <circle cx="8" cy="5" r="2.5" stroke="currentColor" stroke-width="1.5"/>
            <path d="M3 14 C3 11 5.5 9 8 9 C10.5 9 13 11 13 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Iniciar Sesión</span>
        </a>
        
        <div *ngIf="isAuthenticated" class="user-menu dropdown">
          <div class="user-info">
            <span class="user-name">{{ currentUser?.username || 'Usuario' }}</span>
            <span class="user-role" [style.color]="getRoleColor(currentUser?.role || 'user')">
              {{ currentUser?.role?.toUpperCase() || 'USER' }}
            </span>
          </div>
          <div class="user-dropdown-menu">
            <a routerLink="/dashboard" class="dropdown-item">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <span>Dashboard</span>
            </a>
            <a *ngIf="isModerator()" routerLink="/games" class="dropdown-item">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="2" y="4" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <path d="M6 4 L6 2 M10 4 L10 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Gestión de Juegos</span>
            </a>
            <a *ngIf="isAdmin()" routerLink="/users" class="dropdown-item">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <circle cx="8" cy="4" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M2 14 C2 10 4.5 8 8 8 C11.5 8 14 10 14 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Gestión de Usuarios</span>
            </a>
            <div class="dropdown-divider"></div>
            <a (click)="logout()" class="dropdown-item logout">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M6 14 L2 14 L2 2 L6 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M11 11 L14 8 L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 8 L6 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Cerrar Sesión</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Navigation Bar -->
  <div class="header-nav-bar">
    <div class="nav-bar-container">
      <nav class="main-nav">
        <a href="#" class="nav-game-link" 
           *ngFor="let game of games"
           (mouseenter)="onGameHover($event)"
           (mouseleave)="onGameLeave($event)">
          <span>{{ game }}</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="nav-arrow">
            <path d="M3 4.5 L6 7.5 L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        
        <a href="#" class="nav-game-link" 
           (mouseenter)="onGameHover($event)"
           (mouseleave)="onGameLeave($event)">
          <span>Más</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="nav-arrow">
            <path d="M3 4.5 L6 7.5 L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        
        <a href="#" class="nav-special-offer" #specialOffer>
          <span>Oferta de Black Friday</span>
        </a>
      </nav>

      <div class="nav-right-section">
        <div class="search-container" #searchContainer>
          <input type="text" 
                 placeholder="Buscar en la tienda" 
                 class="search-input"
                 (focus)="onSearchFocus()"
                 (blur)="onSearchBlur()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" class="search-icon">
            <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="1.5"/>
            <path d="M13 13 L17 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        
        <a href="#" class="balance-link dropdown" #balanceLink>
          <span>Saldo de Battle.net</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="dropdown-arrow">
            <path d="M3 4.5 L6 7.5 L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</header>

